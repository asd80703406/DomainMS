{"version":3,"sources":["webpack:///static/js/6.1d82d18c2d184c588d97.js","webpack:///./src/views/users/user.vue","webpack:///src/views/users/user.vue","webpack:///./src/views/users/user.vue?882b","webpack:///./src/api/users.js"],"names":["webpackJsonp","OreX","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_user_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_940b1714_hasScoped_false_buble_transforms_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_user_vue__","normalizeComponent","Component","Y+YH","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","n","__WEBPACK_IMPORTED_MODULE_1__api_users__","data","formLabelWidth","pivileage","checkedKey","isIndeterminate","list","total","choices","listLoading","listQuery","page","pagesize","temp","username","perms","dialogFormVisible","dialogStatus","data2","id","label","children","defaultProps","created","this","getList","console","log","methods","_this","then","response","catch","err","handleSizeChange","val","handleCurrentChange","handleEdit","index","row","split","handleDelete","update","_this2","$refs","tree","getCheckedKeys","toString","$notify","title","message","msg","type","duration","getCheckedNodes","bVxD","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","width","attrs","border","prop","sortable","_v","scopedSlots","_u","key","fn","scope","size","on","click","$event","$index","directives","name","rawName","expression","current-page","page-sizes","page-size","limit","layout","size-change","current-change","update:currentPage","$set","visible","update:visible","ref","show-checkbox","node-key","default-checked-keys","props","slot","staticRenderFns","esExports","o3g8","getPerm","params","__WEBPACK_IMPORTED_MODULE_0__utils_request__","url","method","editPerm"],"mappings":"AAAAA,cAAc,IAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAkIJ,EAAoB,QCP/KK,EAAAL,EAAA,QAAAM,EAAAN,EAAA,QAaAO,EAAAD,EACAF,EAAA,EACAC,EAAA,GATA,EAEA,KAEA,KAEA,KAUAN,GAAA,QAAAQ,EAAA,SDcMC,OACA,SAAUV,EAAQC,EAAqBC,GAE7C,YACqB,IAAIS,GAAoET,EAAoB,QACxFU,EAA4EV,EAAoBW,EAAEF,GAClGG,EAA2CZ,EAAoB,OELxFD,GAAA,GF6CEc,KAAM,WACJ,OACEC,eE3CN,QF4CMC,UE3CN,KF4CMC,WE3CN,KF4CMC,iBE3CN,EF4CMC,KE3CN,KF4CMC,ME3CN,KF4CMC,QE3CN,KF4CMC,aE3CN,EF4CMC,WACEC,KE3CR,EF4CQC,SE1CR,IF4CMC,MACEC,SE3CR,GF4CQC,MEzCR,IF4CMC,mBE3CN,EF4CMC,aE1CN,GF4CMC,QACEC,GE3CR,IF4CQC,ME1CR,QF4CQC,WACEF,GE3CV,KF4CUC,ME3CV,OF6CUD,GE3CV,KF4CUC,ME3CV,OF6CUD,GE3CV,KF4CUC,ME3CV,OF6CUD,GE3CV,KF4CUC,MEzCV,SF6CQD,GE3CR,IF4CQC,ME3CR,WF4CQC,WACEF,GE3CV,KF4CUC,ME3CV,OF6CUD,GE3CV,KF4CUC,ME3CV,OF6CUD,GE3CV,KF4CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,MEzCV,SF4CQD,GE1CR,IF2CQC,ME1CR,WF2CQC,WACEF,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,ME1CV,OF4CUD,GE1CV,KF2CUC,MExCV,SF4CQD,GE1CR,IF2CQC,MEzCR,SF2CME,cACED,SE1CR,WF2CQD,MExCR,WF4CEG,QAAS,WACPC,KE1CJC,UF2CIC,QAAQC,IE1CZ,kBF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","file":"static/js/6.1d82d18c2d184c588d97.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ \"OreX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_user_vue__ = __webpack_require__(\"Y+YH\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_940b1714_hasScoped_false_buble_transforms_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_user_vue__ = __webpack_require__(\"bVxD\");\nvar normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_user_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_940b1714_hasScoped_false_buble_transforms_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_user_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Y+YH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"aA9S\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__api_users__ = __webpack_require__(\"o3g8\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      formLabelWidth: '120px',\n      pivileage: null,\n      checkedKey: null,\n      isIndeterminate: true,\n      list: null,\n      total: null,\n      choices: null,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        pagesize: 20\n      },\n      temp: {\n        username: '',\n        perms: ''\n\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n\n      data2: [{\n        id: '1',\n        label: 'SSL证书',\n\n        children: [{\n          id: '1c',\n          label: '分发'\n        }, {\n          id: '1u',\n          label: '修改'\n        }, {\n          id: '1d',\n          label: '删除'\n        }, {\n          id: '1l',\n          label: '上传'\n        }]\n\n      }, {\n        id: '2',\n        label: 'nginx服务器',\n        children: [{\n          id: '2c',\n          label: '增加'\n        }, {\n          id: '2u',\n          label: '修改'\n        }, {\n          id: '2r',\n          label: '请求'\n        }, {\n          id: '2n',\n          label: '连接'\n        }, {\n          id: '2d',\n          label: '删除'\n        }, {\n          id: '2l',\n          label: '上传'\n        }, {\n          id: '2s',\n          label: '重启'\n        }, {\n          id: '2k',\n          label: '检查'\n        }, {\n          id: '2t',\n          label: '切换'\n        }]\n      }, {\n        id: '3',\n        label: 'domain管理',\n        children: [{\n          id: '3c',\n          label: '增加'\n        }, {\n          id: '3u',\n          label: '修改'\n        }, {\n          id: '3r',\n          label: '查询'\n        }, {\n          id: '3d',\n          label: '删除'\n        }]\n\n      }, {\n        id: '4',\n        label: 'User'\n      }],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      }\n    };\n  },\n  created: function created() {\n    this.getList();\n    console.log('geting list..');\n  },\n\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      Object(__WEBPACK_IMPORTED_MODULE_1__api_users__[\"b\" /* getPerm */])(this.listQuery).then(function (response) {\n        console.log(response.data);\n        _this.list = response.data;\n\n        _this.total = response.total;\n        _this.listLoading = false;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.pagesize = val;\n      this.getList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.getList();\n    },\n    handleEdit: function handleEdit(index, row) {\n      console.log(row);\n      this.temp = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({}, row);\n      this.checkedKey = this.temp.perms.split(',');\n      console.log(this.checkedKey);\n      this.dialogStatus = 'edit';\n      this.dialogFormVisible = true;\n    },\n    handleDelete: function handleDelete(index, row) {\n      console.log(index, row);\n    },\n    update: function update() {\n      var _this2 = this;\n\n      this.choices = this.$refs.tree.getCheckedKeys();\n      console.log(this.choices);\n      this.temp.perms = this.choices.toString();\n\n      Object(__WEBPACK_IMPORTED_MODULE_1__api_users__[\"a\" /* editPerm */])(this.temp).then(function (response) {\n        console.log(response.data);\n        _this2.dialogFormVisible = false;\n        _this2.$notify({\n          title: '成功',\n          message: response.data.msg,\n          type: 'success',\n          duration: 2000\n        });\n        _this2.getList();\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    getCheckedNodes: function getCheckedNodes() {\n      console.log(this.$refs.tree.getCheckedNodes());\n    },\n    getCheckedKeys: function getCheckedKeys() {\n      console.log(this.$refs.tree.getCheckedKeys());\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"bVxD\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"用户名\",\"prop\":\"username\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"权限\",\"prop\":\"perms\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit(scope.$index,scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.listLoading),expression:\"!listLoading\"}],staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.listQuery.page,\"page-sizes\":[20,30, 50],\"page-size\":_vm.listQuery.limit,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.listQuery, \"page\", $event)}}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogStatus,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data2,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.checkedKey,\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.update}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"o3g8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getPerm;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = editPerm;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_request__ = __webpack_require__(\"vLgD\");\n\n\nfunction getPerm(params) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__utils_request__[\"a\" /* default */])({\n    url: '/user/getPerm',\n    method: 'get',\n    params: params\n  });\n}\n\nfunction editPerm(params) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0__utils_request__[\"a\" /* default */])({\n    url: '/user/editPerm',\n    method: 'post',\n    data: { params: params }\n  });\n}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/6.1d82d18c2d184c588d97.js","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-940b1714\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/user.vue\n// module id = OreX\n// module chunks = 6","<template>\n<div class=\"app-container\">\n  <el-table :data=\"list\" border style=\"width: 100%\">\n    <el-table-column label=\"用户名\" prop=\"username\" sortable>\n    </el-table-column>\n    <el-table-column label=\"权限\" prop=\"perms\" sortable>\n    </el-table-column>\n\n\n    <el-table-column label=\"操作\">\n      <template slot-scope=\"scope\">\n        <el-button\n          size=\"small\"\n          @click=\"handleEdit(scope.$index,scope.row)\">编辑</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n\n  <div v-show=\"!listLoading\" class=\"pagination-container\">\n    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"listQuery.page\" :page-sizes=\"[20,30, 50]\" :page-size=\"listQuery.limit\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\n    </el-pagination>\n  </div>\n  <el-dialog :title=\"dialogStatus\" :visible.sync=\"dialogFormVisible\">\n    <el-tree :data=\"data2\" show-checkbox node-key=\"id\" ref=\"tree\" :default-checked-keys=\"checkedKey\" :props=\"defaultProps\">\n    </el-tree>\n    <div slot=\"footer\" class=\"dialog-footer\">\n\n\n      <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"update\">确 定</el-button>\n    </div>\n  </el-dialog>\n</div>\n</template>\n\n<script>\nimport {getPerm,editPerm} from '@/api/users'\nexport default {\n  data() {\n    return {\n      formLabelWidth: '120px',\n      pivileage: null,\n      checkedKey: null,\n      isIndeterminate: true,\n      list: null,\n      total: null,\n      choices: null,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        pagesize: 20,\n      },\n      temp: {\n        username: '',\n        perms: ''\n\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n\n      data2: [{\n        id: '1',\n        label: 'SSL证书',\n\n            children: [{\n              id: '1c',\n              label: '分发'\n            }, {\n              id: '1u',\n              label: '修改'\n            }, {\n              id: '1d',\n              label: '删除'\n            }, {\n              id: '1l',\n              label: '上传'\n            }]\n\n      }, {\n        id: '2',\n        label: 'nginx服务器',\n        children: [{\n          id: '2c',\n          label: '增加'\n        }, {\n          id: '2u',\n          label: '修改'\n        }, {\n          id: '2r',\n          label: '请求'\n        },\n        {\n          id: '2n',\n          label: '连接'\n        },{\n          id: '2d',\n          label: '删除'\n        }, {\n          id: '2l',\n          label: '上传'\n        },{\n          id: '2s',\n          label: '重启'\n        },{\n          id: '2k',\n          label: '检查'\n        },{\n          id: '2t',\n          label: '切换'\n        }]\n      }, {\n        id: '3',\n        label: 'domain管理',\n            children: [{\n              id: '3c',\n              label: '增加'\n            }, {\n              id: '3u',\n              label: '修改'\n            }, {\n              id: '3r',\n              label: '查询'\n            }, {\n              id: '3d',\n              label: '删除'\n            }]\n\n      }, {\n        id: '4',\n        label: 'User'\n      }],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      }\n    }\n  },\n  created() {\n    this.getList()\n    console.log('geting list..')\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      getPerm(this.listQuery).then(response => {\n        console.log(response.data);\n        this.list = response.data\n\n        this.total = response.total\n        this.listLoading = false\n      }).catch((err) => {\n        console.log(err)\n      })\n\n\n    },\n    handleSizeChange(val) {\n      this.listQuery.pagesize = val\n      this.getList()\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.getList()\n    },\n    handleEdit(index, row) {\n      console.log(row)\n      this.temp = Object.assign({}, row)\n      this.checkedKey = this.temp.perms.split(',')\n      console.log(this.checkedKey)\n      this.dialogStatus = 'edit'\n      this.dialogFormVisible = true\n    },\n    handleDelete(index, row) {\n      console.log(index, row);\n    },\n    update() {\n      this.choices = this.$refs.tree.getCheckedKeys();\n      console.log(this.choices)\n      this.temp.perms = this.choices.toString()\n\n      editPerm(this.temp).then(response => {\n        console.log(response.data)\n        this.dialogFormVisible = false\n        this.$notify({\n          title: '成功',\n          message: response.data.msg,\n          type: 'success',\n          duration: 2000\n        })\n        this.getList()\n      }).catch((err) => {\n        console.log(err)\n      })\n\n    },\n    getCheckedNodes() {\n      console.log(this.$refs.tree.getCheckedNodes());\n    },\n    getCheckedKeys() {\n      console.log(this.$refs.tree.getCheckedKeys());\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/users/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"用户名\",\"prop\":\"username\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"权限\",\"prop\":\"perms\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit(scope.$index,scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.listLoading),expression:\"!listLoading\"}],staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.listQuery.page,\"page-sizes\":[20,30, 50],\"page-size\":_vm.listQuery.limit,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.listQuery, \"page\", $event)}}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogStatus,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data2,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.checkedKey,\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.update}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-940b1714\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/users/user.vue\n// module id = bVxD\n// module chunks = 6","import request from '@/utils/request'\n\nexport function getPerm(params) {\n  return request({\n    url: '/user/getPerm',\n    method: 'get',\n    params\n  })\n}\n\nexport function editPerm(params) {\n  return request({\n    url: '/user/editPerm',\n    method: 'post',\n    data: { params }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/users.js"],"sourceRoot":""}